(function(){"use strict";var e={875:function(e,t,n){var l=n(963),a=n(252);function i(e,t){const n=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(n)}var r=n(744);const s={},o=(0,r.Z)(s,[["render",i]]);var d=o,u=n(205);(0,u.z)("/crm/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var c=n(201);const p={class:"sidebar"},h={class:"sidebar__filters"};function f(e,t,n,l,i,r){const s=(0,a.up)("LeftSideBar"),o=(0,a.up)("SearchBar"),d=(0,a.up)("DropdownStatusFilter"),u=(0,a.up)("MainSideBar");return(0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(s),(0,a._)("div",h,[(0,a.Wm)(o,{query:i.searchQuery,"onUpdate:query":t[0]||(t[0]=e=>i.searchQuery=e)},null,8,["query"]),(0,a.Wm)(d,{status:i.filterStatus,"onUpdate:status":t[1]||(t[1]=e=>i.filterStatus=e),switchStyle:!1},null,8,["status"])]),(0,a.Wm)(u,{searchQuery:i.searchQuery,filterStatus:i.filterStatus},null,8,["searchQuery","filterStatus"])])}const m={class:"sidebar__left"},g=(0,a.uE)('<ul class="sidebar__menu"><li class="sidebar__menu-item"><a href="/clients">Клиенты</a></li><li class="sidebar__menu-item"><a href="/tasks">Задачи</a></li><li class="sidebar__menu-item"><a href="/calendar">Календарь</a></li><li class="sidebar__menu-item"><a href="/analytics">Аналитика</a></li><li class="sidebar__menu-item"><a href="/settings">Настройки</a></li></ul>',1),_=[g];function C(e,t,n,l,i,r){return(0,a.wg)(),(0,a.iD)("div",m,_)}var v={name:"LeftSideBar"};const w=(0,r.Z)(v,[["render",C]]);var y=w,S=n(577);const b={class:"sidebar__main"},I=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Ф.И.О."),(0,a._)("th",null,"Телефон"),(0,a._)("th",null,"Город"),(0,a._)("th",null,"Статус"),(0,a._)("th",null,"Дата создания"),(0,a._)("th",null,"Действия")])],-1),D=["onDragstart","onDragover"],T=["onClick"],k={class:"client-action"},E=["onClick"],Z=(0,a._)("span",{class:"icon-edit"},null,-1),N=[Z],O=["onClick"],$=(0,a._)("span",{class:"icon-delete"},null,-1),x=[$];function U(e,t,n,i,r,s){const o=(0,a.up)("AddClient"),d=(0,a.up)("EditClient");return(0,a.wg)(),(0,a.iD)("div",b,[(0,a._)("table",null,[I,(0,a.Wm)(l.W3,{name:"fade",tag:"tbody",onDrop:s.drop,onDragend:s.dragEnd},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.filteredClients,((e,n)=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id,draggable:"true",onDragstart:e=>s.dragStart(n),onDragover:(0,l.iM)((e=>s.dragOver(n)),["prevent"]),onDrop:t[0]||(t[0]=(0,l.iM)(((...e)=>s.drop&&s.drop(...e)),["prevent"])),onDragend:t[1]||(t[1]=(...e)=>s.dragEnd&&s.dragEnd(...e)),class:(0,S.C_)({dragging:r.draggedIndex===n,over:r.overIndex===n})},[(0,a._)("td",{class:"client-name",onClick:t=>s.goToClientInfo(e.id)},(0,S.zw)(e.fullname),9,T),(0,a._)("td",null,(0,S.zw)(e.phone),1),(0,a._)("td",null,(0,S.zw)(e.region),1),(0,a._)("td",null,(0,S.zw)(e.status),1),(0,a._)("td",null,(0,S.zw)(s.formatDate(e.created_at)),1),(0,a._)("td",null,[(0,a._)("div",k,[(0,a._)("button",{class:"btn-edit",onClick:t=>s.editClient(e)},N,8,E),(0,a._)("button",{class:"btn-delete",onClick:t=>s.removeClient(e.id)},x,8,O)])])],42,D)))),128))])),_:1},8,["onDrop","onDragend"])]),r.editing?((0,a.wg)(),(0,a.j4)(d,{key:1,client:r.clientToEdit,onUpdate:s.updateClient,onCancel:s.cancelEdit},null,8,["client","onUpdate","onCancel"])):((0,a.wg)(),(0,a.j4)(o,{key:0}))])}const Q={class:"add-client"},L={for:"add-fullname"},F={for:"add-phone"},j={for:"add-region"};function z(e,t,n,i,r,s){const o=(0,a.up)("DropdownStatusFilter"),d=(0,a.Q2)("mask");return(0,a.wg)(),(0,a.iD)("div",Q,[(0,a._)("label",L,[(0,a.wy)((0,a._)("input",{id:"add-fullname","onUpdate:modelValue":t[0]||(t[0]=e=>r.newClient.fullname=e),placeholder:"Ф.И.О.",onInput:t[1]||(t[1]=(...e)=>s.validateNameInput&&s.validateNameInput(...e))},null,544),[[l.nr,r.newClient.fullname]])]),(0,a._)("label",F,[(0,a.wy)((0,a._)("input",{id:"add-phone","onUpdate:modelValue":t[2]||(t[2]=e=>r.newClient.phone=e),placeholder:"+7-(ХХХ)-ХХХ-ХХ-ХХ"},null,512),[[l.nr,r.newClient.phone],[d,"+#-(###)-###-##-##"]])]),(0,a._)("label",j,[(0,a.wy)((0,a._)("input",{id:"add-region","onUpdate:modelValue":t[3]||(t[3]=e=>r.newClient.region=e),placeholder:"Город",onInput:t[4]||(t[4]=(...e)=>s.validateCityInput&&s.validateCityInput(...e))},null,544),[[l.nr,r.newClient.region]])]),(0,a.Wm)(o,{status:r.newClient.status,"onUpdate:status":t[5]||(t[5]=e=>r.newClient.status=e),switchStyle:!0},null,8,["status"]),(0,a._)("button",{onClick:t[6]||(t[6]=(...e)=>s.addClient&&s.addClient(...e)),class:"btn-add"},"Добавить")])}var B=n(982);const M={for:"dropdown-status"},X=(0,a._)("option",{value:""},"Не выбрано",-1),A=(0,a._)("option",{value:"Активен"},"Активен",-1),V=(0,a._)("option",{value:"Неактивен"},"Неактивен",-1),W=(0,a._)("option",{value:"Приостановлен"},"Приостановлен",-1),q=[X,A,V,W];function J(e,t,n,i,r,s){return(0,a.wg)(),(0,a.iD)("div",{class:(0,S.C_)(["dropdown-status-filter",{"small-margin":n.switchStyle,"large-margin":!n.switchStyle}])},[(0,a._)("label",M,[(0,a.wy)((0,a._)("select",{id:"dropdown-status","onUpdate:modelValue":t[0]||(t[0]=e=>r.selectedStatus=e),class:(0,S.C_)({"large-padding":n.switchStyle,"small-padding":!n.switchStyle})},q,2),[[l.bM,r.selectedStatus]])])],2)}var P={name:"DropdownStatusFilter",props:{switchStyle:{type:Boolean,default:!1}},data(){return{selectedStatus:""}},watch:{selectedStatus(e){this.$emit("update:status",e)}}};const Y=(0,r.Z)(P,[["render",J]]);var R=Y,H={name:"AddClient",directives:{mask:B.mask},components:{DropdownStatusFilter:R},data(){return{newClient:{fullname:"",phone:"",region:"",status:""}}},methods:{addClient(){this.$store.dispatch("addClient",this.newClient),this.newClient={fullname:"",phone:"",region:"",status:""}},validateNameInput(){this.newClient.fullname=this.newClient.fullname.replace(/[^а-яё\s]/gi,"")},validateCityInput(){this.newClient.region=this.newClient.region.replace(/[^а-яё-\s]/gi,"")}}};const K=(0,r.Z)(H,[["render",z]]);var G=K;const ee={class:"edit-client"},te={for:"edit-fullname"},ne={for:"edit-phone"},le={for:"edit-region"};function ae(e,t,n,i,r,s){const o=(0,a.up)("DropdownStatusFilter"),d=(0,a.Q2)("mask");return(0,a.wg)(),(0,a.iD)("div",ee,[(0,a._)("label",te,[(0,a.wy)((0,a._)("input",{id:"edit-fullname","onUpdate:modelValue":t[0]||(t[0]=e=>r.localClient.fullname=e),placeholder:"Ф.И.О.",onInput:t[1]||(t[1]=(...e)=>s.validateNameInput&&s.validateNameInput(...e))},null,544),[[l.nr,r.localClient.fullname]])]),(0,a._)("label",ne,[(0,a.wy)((0,a._)("input",{id:"edit-phone","onUpdate:modelValue":t[2]||(t[2]=e=>r.localClient.phone=e),placeholder:"+X-(XXX)-XXX-XX-XX"},null,512),[[l.nr,r.localClient.phone],[d,"+#-(###)-###-##-##"]])]),(0,a._)("label",le,[(0,a.wy)((0,a._)("input",{id:"edit-region","onUpdate:modelValue":t[3]||(t[3]=e=>r.localClient.region=e),placeholder:"Город",onInput:t[4]||(t[4]=(...e)=>s.validateCityInput&&s.validateCityInput(...e))},null,544),[[l.nr,r.localClient.region]])]),(0,a.Wm)(o,{status:r.localClient.status,"onUpdate:status":t[5]||(t[5]=e=>r.localClient.status=e),switchStyle:!0},null,8,["status"]),(0,a._)("button",{onClick:t[6]||(t[6]=(...e)=>s.update&&s.update(...e)),class:"btn-refresh"},"Обновить"),(0,a._)("button",{onClick:t[7]||(t[7]=(...e)=>s.cancel&&s.cancel(...e)),class:"btn-cancel"},"Отменить")])}var ie={name:"EditClient",directives:{mask:B.mask},props:{client:{type:Object,required:!0}},components:{DropdownStatusFilter:R},data(){return{localClient:{...this.client}}},methods:{update(){this.$emit("update",this.localClient)},cancel(){this.$emit("cancel")},validateNameInput(){this.localClient.fullname=this.localClient.fullname.replace(/[^а-яё\s]/gi,"")},validateCityInput(){this.localClient.region=this.localClient.region.replace(/[^а-яё-\s]/gi,"")}},watch:{client(e){this.localClient={...e}}}};const re=(0,r.Z)(ie,[["render",ae]]);var se=re,oe={name:"MainSideBar",components:{AddClient:G,EditClient:se},props:{searchQuery:String,filterStatus:String},data(){return{editing:!1,clientToEdit:null,draggedIndex:null,overIndex:null}},computed:{clients(){return this.$store.state.clients},filteredClients(){return this.clients.filter((e=>e.fullname.includes(this.searchQuery)&&(""===this.filterStatus||e.status===this.filterStatus)))}},created(){this.$store.dispatch("fetchClients")},methods:{formatDate(e){const t=new Date(e),n=t.getFullYear().toString().substr(-2),l=`0${t.getMonth()+1}`.slice(-2),a=`0${t.getDate()}`.slice(-2);return`${a}/${l}/${n}`},goToClientInfo(e){this.$router.push({name:"ClientInfo",params:{id:e}})},removeClient(e){this.$store.dispatch("removeClient",e)},editClient(e){this.editing=!0,this.clientToEdit={...e}},updateClient(e){this.$store.dispatch("updateClient",e),this.editing=!1,this.clientToEdit=null},cancelEdit(){this.editing=!1,this.clientToEdit=null},dragStart(e){this.draggedIndex=e},dragOver(e){this.overIndex=e},drop(){if(null!==this.draggedIndex&&null!==this.overIndex){const e=this.clients.find((e=>e.id===this.filteredClients[this.draggedIndex].id)),t=this.clients.indexOf(e),n=this.clients.indexOf(this.filteredClients[this.overIndex]);this.clients.splice(t,1),this.clients.splice(n,0,e)}this.dragEnd()},dragEnd(){this.draggedIndex=null,this.overIndex=null}}};const de=(0,r.Z)(oe,[["render",U]]);var ue=de;const ce={class:"search-bar"},pe={for:"search-bar"};function he(e,t,n,i,r,s){return(0,a.wg)(),(0,a.iD)("div",ce,[(0,a._)("label",pe,[(0,a.wy)((0,a._)("input",{id:"search-bar",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),placeholder:"Поиск по Ф.И.О.",onInput:t[1]||(t[1]=(...e)=>s.validateNameInput&&s.validateNameInput(...e))},null,544),[[l.nr,r.searchQuery]])])])}var fe={name:"SearchBar",data(){return{searchQuery:""}},watch:{searchQuery(e){this.$emit("update:query",e)}},methods:{validateNameInput(){this.searchQuery=this.searchQuery.replace(/[^а-яё\s]/gi,"")}}};const me=(0,r.Z)(fe,[["render",he]]);var ge=me,_e={name:"ClientList",components:{LeftSideBar:y,MainSideBar:ue,SearchBar:ge,DropdownStatusFilter:R},data(){return{searchQuery:"",filterStatus:""}}};const Ce=(0,r.Z)(_e,[["render",f]]);var ve=Ce;const we={key:0,class:"client-info"},ye=(0,a._)("span",null,"Ф.И.О.:",-1),Se=(0,a._)("span",null," Номер телефона: ",-1),be=(0,a._)("span",null," Город: ",-1),Ie=(0,a._)("span",null," Статус: ",-1),De=(0,a._)("span",null," Последнее изменение: ",-1);function Te(e,t,n,l,i,r){return r.client?((0,a.wg)(),(0,a.iD)("div",we,[(0,a._)("p",null,[ye,(0,a.Uk)(" "+(0,S.zw)(r.client.fullname)+". ",1)]),(0,a._)("p",null,[Se,(0,a.Uk)(" "+(0,S.zw)(r.client.phone)+". ",1)]),(0,a._)("p",null,[be,(0,a.Uk)(" "+(0,S.zw)(r.client.region)+". ",1)]),(0,a._)("p",null,[Ie,(0,a.Uk)(" "+(0,S.zw)(r.client.status)+". ",1)]),(0,a._)("p",null,[De,(0,a.Uk)(" "+(0,S.zw)(r.formatDate(r.client.created_at))+". ",1)])])):(0,a.kq)("",!0)}var ke={name:"ClientInfo",computed:{client(){const e=this.$route.params.id;return this.$store.state.clients.find((t=>t.id==e))}},methods:{formatDate(e){const t=new Date(e),n=t.getFullYear().toString().substr(-2),l=`0${t.getMonth()+1}`.slice(-2),a=`0${t.getDate()}`.slice(-2);return`${a}/${l}/${n}`}}};const Ee=(0,r.Z)(ke,[["render",Te]]);var Ze=Ee;const Ne=[{path:"/",name:"ClientList",component:ve},{path:"/client/:id",name:"ClientInfo",component:Ze}],Oe=(0,c.p7)({history:(0,c.PO)("/crm/"),routes:Ne});var $e=Oe,xe=n(907),Ue=JSON.parse('[{"id":0,"fullname":"Иванов Иван Иванович","created_at":"2023-01-18T12:30:00Z","phone":"12345678901","region":"Москва","status":"Активен"},{"id":1,"fullname":"Петров Петр Петрович","created_at":"2023-02-05T15:45:00Z","phone":"23456789012","region":"Санкт-Петербург","status":"Неактивен"},{"id":2,"fullname":"Смирнова Анна Игоревна","created_at":"2023-03-12T09:20:00Z","phone":"34567890123","region":"Новосибирск","status":"Активен"},{"id":3,"fullname":"Кузнецов Сергей Александрович","created_at":"2023-04-28T18:00:00Z","phone":"45678901234","region":"Екатеринбург","status":"Неактивен"},{"id":4,"fullname":"Александрова Мария Владимировна","created_at":"2023-05-15T14:10:00Z","phone":"56789012345","region":"Казань","status":"Приостановлен"},{"id":5,"fullname":"Николаев Игорь Анатольевич","created_at":"2023-06-03T07:55:00Z","phone":"67890123456","region":"Челябинск","status":"Активен"},{"id":6,"fullname":"Борисова Екатерина Дмитриевна","created_at":"2023-07-19T20:30:00Z","phone":"78901234567","region":"Самара","status":"Неактивен"},{"id":7,"fullname":"Медведев Артем Валентинович","created_at":"2023-08-24T11:45:00Z","phone":"89012345678","region":"Омск","status":"Приостановлен"},{"id":8,"fullname":"Козлова Ольга Александровна","created_at":"2023-09-10T16:25:00Z","phone":"90123456789","region":"Воронеж","status":"Активен"},{"id":9,"fullname":"Тимофеев Андрей Петрович","created_at":"2023-10-27T22:05:00Z","phone":"01234567890","region":"Ростов-на-Дону","status":"Неактивен"},{"id":10,"fullname":"Полякова Анастасия Сергеевна","created_at":"2023-11-15T13:40:00Z","phone":"10987654321","region":"Уфа","status":"Приостановлен"},{"id":11,"fullname":"Григорьев Владимир Николаевич","created_at":"2023-12-02T08:15:00Z","phone":"98765432109","region":"Пермь","status":"Активен"},{"id":12,"fullname":"Сергеева Людмила Игоревна","created_at":"2024-01-18T05:50:00Z","phone":"87654321098","region":"Владивосток","status":"Неактивен"},{"id":13,"fullname":"Васильев Дмитрий Валерьевич","created_at":"2024-02-04T19:35:00Z","phone":"76543210987","region":"Ярославль","status":"Приостановлен"},{"id":14,"fullname":"Комарова Елена Станиславовна","created_at":"2024-03-21T10:00:00Z","phone":"65432109876","region":"Иркутск","status":"Активен"},{"id":15,"fullname":"Захаров Павел Васильевич","created_at":"2024-04-06T17:20:00Z","phone":"54321098765","region":"Тольятти","status":"Неактивен"},{"id":16,"fullname":"Андреева Алина Владимировна","created_at":"2024-05-23T21:55:00Z","phone":"43210987654","region":"Красноярск","status":"Приостановлен"},{"id":17,"fullname":"Игнатьев Игнат Семенович","created_at":"2024-06-09T14:45:00Z","phone":"32109876543","region":"Тюмень","status":"Активен"},{"id":18,"fullname":"Кудрявцева Татьяна Михайловна","created_at":"2024-07-26T08:10:00Z","phone":"21098765432","region":"Сочи","status":"Неактивен"},{"id":19,"fullname":"Федоров Максим Артемович","created_at":"2024-08-12T18:30:00Z","phone":"10987654321","region":"Калининград","status":"Приостановлен"}]'),Qe={getClients(){return new Promise((e=>{setTimeout((()=>e(Ue)),1e3)}))}},Le=(0,xe.MT)({state:{clients:JSON.parse(localStorage.getItem("clients"))||[]},getters:{},mutations:{SET_CLIENTS(e,t){e.clients=t},ADD_CLIENT(e,t){e.clients.push(t),localStorage.setItem("clients",JSON.stringify(e.clients))},REMOVE_CLIENT(e,t){e.clients=e.clients.filter((e=>e.id!==t)),localStorage.setItem("clients",JSON.stringify(e.clients))},UPDATE_CLIENT(e,t){const n=e.clients.findIndex((e=>e.id===t.id));-1!==n&&(e.clients.splice(n,1,t),localStorage.setItem("clients",JSON.stringify(e.clients)))}},actions:{async fetchClients({commit:e,state:t}){if(0===t.clients.length){const t=await Qe.getClients();e("SET_CLIENTS",t),localStorage.setItem("clients",JSON.stringify(t))}},addClient({commit:e},t){const n=Date.now().toString(),l=(new Date).toISOString(),a={id:n,created_at:l,...t};e("ADD_CLIENT",a)},removeClient({commit:e},t){e("REMOVE_CLIENT",t)},updateClient({commit:e},t){e("UPDATE_CLIENT",t)}},modules:{}});(0,l.ri)(d).use(Le).use($e).mount("#app")}},t={};function n(l){var a=t[l];if(void 0!==a)return a.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,l,a,i){if(!l){var r=1/0;for(u=0;u<e.length;u++){l=e[u][0],a=e[u][1],i=e[u][2];for(var s=!0,o=0;o<l.length;o++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](l[o])}))?l.splice(o--,1):(s=!1,i<r&&(r=i));if(s){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[l,a,i]}}(),function(){n.d=function(e,t){for(var l in t)n.o(t,l)&&!n.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,i,r=l[0],s=l[1],o=l[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(o)var u=o(n)}for(t&&t(l);d<r.length;d++)i=r[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},l=self["webpackChunkacticom"]=self["webpackChunkacticom"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=n.O(void 0,[998],(function(){return n(875)}));l=n.O(l)})();
//# sourceMappingURL=app.ead46e60.js.map